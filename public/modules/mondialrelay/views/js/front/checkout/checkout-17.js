/*!
 * NOTICE OF LICENSE
 * 
 * @author    202 ecommerce <tech@202-ecommerce.com>
 * @author    Mondial Relay
 * @copyright Copyright (c) Mondial Relay
 * @license http://opensource.org/licenses/osl-3.0.php Open Software License (OSL 3.0)
 */!function(e){var n={};function a(t){if(n[t])return n[t].exports;var r=n[t]={i:t,l:!1,exports:{}};return e[t].call(r.exports,r,r.exports,a),r.l=!0,r.exports}a.m=e,a.c=n,a.d=function(e,n,t){a.o(e,n)||Object.defineProperty(e,n,{enumerable:!0,get:t})},a.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},a.t=function(e,n){if(1&n&&(e=a(e)),8&n)return e;if(4&n&&"object"==typeof e&&e&&e.__esModule)return e;var t=Object.create(null);if(a.r(t),Object.defineProperty(t,"default",{enumerable:!0,value:e}),2&n&&"string"!=typeof e)for(var r in e)a.d(t,r,function(n){return e[n]}.bind(null,r));return t},a.n=function(e){var n=e&&e.__esModule?function(){return e.default}:function(){return e};return a.d(n,"a",n),n},a.o=function(e,n){return Object.prototype.hasOwnProperty.call(e,n)},a.p="",a(a.s=12)}({0:function(e,n,a){"use strict";a.d(n,"c",function(){return r}),a.d(n,"b",function(){return o}),a.d(n,"a",function(){return i}),a.d(n,"d",function(){return t});var t=a(1).a,r=function(){return-1!=MONDIALRELAY_NATIVE_RELAY_CARRIERS_IDS.indexOf(o())},o=function(){var e=$('[name^="delivery_option"]:checked').val();return!!e&&e.replace(",","")},i=function(e){return MONDIALRELAY_CARRIER_METHODS[e].delivery_mode};
/**
 * NOTICE OF LICENSE
 *
 * @author    202 ecommerce <tech@202-ecommerce.com>
 * @author    Mondial Relay
 * @copyright Copyright (c) Mondial Relay
 * @license http://opensource.org/licenses/osl-3.0.php Open Software License (OSL 3.0)
 */$(document).on("click",t.save_button,function(e){e.preventDefault(),e.stopPropagation(),t.displayErrors(null),$(t.summary_container).empty().show(),t.addLoader(t.summary_container),$(t).trigger("mondialrelay.saveSelectedRelay.before");var n={ajax:!0,action:"saveSelectedRelay",mondialrelay_selectedRelay:MONDIALRELAY_SELECTED_RELAY_IDENTIFIER||0,id_carrier:o()};return $.ajax({type:"POST",url:MONDIALRELAY_AJAX_CHECKOUT_URL,data:n,dataType:"json",success:function(e){if(e){if("ok"!=e.status)return t.savedRelay=null,e.error.length&&t.displayErrors(e.error),t.removeLoader($(t.summary_container)),void $(t).trigger("mondialrelay.saveSelectedRelay.error");t.savedRelay=MONDIALRELAY_SELECTED_RELAY_IDENTIFIER,$(t.summary_container).html(e.content.relaySummary),t.hide(),$(t.save_container).hide(),$(t.widget_container).slideUp(),$(t.save_container).slideUp(),$(t).trigger("mondialrelay.saveSelectedRelay.success")}else this.error(e)},error:function(e){t.savedRelay=null,alert(MONDIALRELAY_SAVE_RELAY_ERROR),$(t).trigger("mondialrelay.saveSelectedRelay.error"),t.removeLoader($(t.summary_container))}}),!1})},1:function(e,n,a){"use strict";a.d(n,"a",function(){return t});
/**
 * NOTICE OF LICENSE
 *
 * @author    202 ecommerce <tech@202-ecommerce.com>
 * @author    Mondial Relay
 * @copyright Copyright (c) Mondial Relay
 * @license http://opensource.org/licenses/osl-3.0.php Open Software License (OSL 3.0)
 */
var t={url:"//widget.mondialrelay.com/parcelshop-picker/jquery.plugin.mondialrelay.parcelshoppicker.min.js",loaded:!1,initialized:!1,widget_container:"#mondialrelay_widget",save_container:"#mondialrelay_save-container",error_container:"#mondialrelay_errors",summary_container:"#mondialrelay_summary",save_button:"#mondialrelay_save-relay",change_button:"#mondialrelay_change-relay",selected_relay_input:"#mondialrelay_selected-relay",widget_search_zipcode_input:"#mondialrelay_widget .MRW-Search .Arg2",widget_search_country_input:"#mondialrelay_widget .MRW-Search .Arg1",savedRelay:null,widget_current_params:null};t.load=function(e){!function(e,n){var a=document.createElement("script");a.onload=n,a.src=e,document.head.appendChild(a)}(t.url,function(){t.loaded=!0,e()})},t.init=function(e){if("undefined"==typeof MONDIALRELAY_BAD_CONFIGURATION||!MONDIALRELAY_BAD_CONFIGURATION){if(t.savedRelay&&$(t.summary_container).slideDown(),!t.loaded)return t.addLoader(t.widget_container),void t.load(function(){t.init(e)});var n={Target:t.selected_relay_input,Brand:MONDIALRELAY_ENSEIGNE,Country:MONDIALRELAY_COUNTRY_ISO,PostCode:MONDIALRELAY_POSTCODE,ShowResultsOnMap:1==MONDIALRELAY_DISPLAY_MAP,NbResults:"7",Responsive:!0,OnParcelShopSelected:function(e){$(t.save_container).show(),t.setSelectedRelay(null,e)}};e&&$.extend(n,e),t.widget_current_params=n,$(t.widget_container).MR_ParcelShopPicker(n),t.initialized=!0}},t.show=function(){$(t.widget_container).show()},t.hide=function(){$(t.widget_container).hide()},t.update=function(e){$(t.widget_container).trigger("MR_SetParams",e),t.widget_current_params=$.extend(t.widget_current_params,e),t.doSearch()},t.initOrUpdate=function(e){t.initialized?t.update(e):t.init(e)},t.setSelectedRelay=function(e,n){if(void 0!==e&&e||(e=$(t.selected_relay_input).val()),e==$(t.selected_relay_input).val()&&MONDIALRELAY_SELECTED_RELAY_IDENTIFIER!=e){var a=MONDIALRELAY_SELECTED_RELAY_IDENTIFIER;MONDIALRELAY_SELECTED_RELAY_IDENTIFIER=e,$(t).trigger("mondialrelay.selectedRelay",{oldRelay:a,relayData:n})}},t.resetSelectedRelay=function(){var e=MONDIALRELAY_SELECTED_RELAY_IDENTIFIER;MONDIALRELAY_SELECTED_RELAY_IDENTIFIER=null,$(t).trigger("mondialrelay.selectedRelay",{oldRelay:e,relayData:null})},t.resetSavedRelay=function(e){t.savedRelay=null,void 0!==e&&e||($(t.summary_container).slideUp(),$(t.widget_container).slideDown(),$(t.save_container).slideDown())},t.doSearch=function(e,n){var a=[void 0!==e&&e?e:$(t.widget_search_zipcode_input).val(),void 0!==n&&n?n:$(t.widget_search_country_input).val()];$(t.widget_container).trigger("MR_DoSearch",a)},t.displayErrors=function(e){var n=$(t.error_container);0!=n.length&&(n.stop(!0),n.children().length&&n.fadeOut(function(){$(this).empty()}),void 0!==e&&e&&(n.queue(function(){var n=[];$.each(e,function(e,a){n.push($("<div/>").addClass("alert alert-danger").text(a))}),$(this).append(n),$(this).dequeue()}),n.fadeIn()))},t.addLoader=function(e){0!=$(e).length&&($(e).children(".mondialrelay_loader").length>0||$("#mondialrelay_loader-template").clone().attr("id",null).show().appendTo(e))},t.removeLoader=function(e){$(e).children(".mondialrelay_loader").remove()},$(document).ready(function(){t.savedRelay=MONDIALRELAY_SELECTED_RELAY_IDENTIFIER,$(t).trigger("mondialrelay.ready")}),$(document).on("click",t.change_button,function(e){t.show()}),$(document).on("click",".MRW-ShowList",function(e){e.preventDefault(),e.stopPropagation()}),$(document).on("click",".PR-City",function(e){e.preventDefault(),e.stopPropagation()})},12:function(e,n,a){"use strict";a.r(n);var t=a(0),r=null,o=null,i=null,l=function(){return r=$('[name^="delivery_option"]:checked').closest(".delivery-option").next(".carrier-extra-content")},d=function(e){e?($("#checkout-delivery-step").removeClass("-complete"),$("button[name='confirmDeliveryOption']").attr("disabled",!0)):($("#checkout-delivery-step").addClass("-complete"),$("button[name='confirmDeliveryOption']").attr("disabled",!1))};
/**
 * NOTICE OF LICENSE
 *
 * @author    202 ecommerce <tech@202-ecommerce.com>
 * @author    Mondial Relay
 * @copyright Copyright (c) Mondial Relay
 * @license http://opensource.org/licenses/osl-3.0.php Open Software License (OSL 3.0)
 */$(t.d).on("mondialrelay.ready",function(){t.c()&&(l(),null===i&&(i=$("#checkout-payment-step").hasClass("-reachable")),$("#checkout-payment-step").removeClass("-reachable").addClass("-unreachable"),$("#mondialrelay_content").appendTo(r),t.d.savedRelay?($(t.d.summary_container).show(),t.d.hide()):(d(!0),t.d.show()),t.d.init({ColLivMod:t.a(t.b())})),$(t.d.widget_container).on("click",function(e){e.preventDefault(),e.stopPropagation()})}),$(document).on("submit","#js-delivery",function(e){return!(t.c()&&!t.d.savedRelay)||(e.preventDefault(),e.stopPropagation(),l(),$("#mondialrelay_content").appendTo(r),t.d.initOrUpdate({ColLivMod:t.a(t.b())}),alert(MONDIALRELAY_NO_SELECTION_ERROR),!1)}),prestashop.on("updatedDeliveryForm",function(){t.d.initialized=!1,t.d.savedRelay=MONDIALRELAY_SELECTED_RELAY_IDENTIFIER}),$("#js-delivery").on("change",'[name^="delivery_option"]',function(e){if(!t.c())return r&&(r.hide(),r=null),d(!1),t.d.resetSelectedRelay(),t.d.resetSavedRelay(!0),o&&($("#checkout-payment-step .content").append(o),o=null),void(null!==i&&i&&$("#checkout-payment-step").addClass("-reachable").removeClass("-unreachable"));(o=$(".js-cart-payment-step-refresh").clone(),$(".js-cart-payment-step-refresh").remove(),null===i&&(i=$("#checkout-payment-step").hasClass("-reachable")),$("#checkout-payment-step").removeClass("-reachable").addClass("-unreachable"),t.d.savedRelay?$(e.target).is(t.d.selected_relay_input)||t.d.hide():(d(!0),t.d.show()),r&&r.hide(),null!=t.d.widget_current_params)&&(t.d.widget_current_params.ColLivMod!=t.a(t.b())&&(t.d.resetSelectedRelay(),t.d.resetSavedRelay()));l(),$("#mondialrelay_content").appendTo(r),t.d.initOrUpdate({ColLivMod:t.a(t.b())})}),$("#js-delivery").on("change","#mondialrelay_content *",function(e){e.preventDefault(),e.stopPropagation()}),$(t.d).on("mondialrelay.saveSelectedRelay.before",function(){d(!0),$("[name^='delivery_option']").attr("readonly",!0).on("click.mondialrelay.lock",function(e){e.preventDefault(),e.stopPropagation()})}),$(t.d).on("mondialrelay.saveSelectedRelay.success",function(){d(!1),$("[name^='delivery_option']").attr("readonly",!1).off("click.mondialrelay.lock")}),$(t.d).on("mondialrelay.saveSelectedRelay.error",function(){d(!0),$("[name^='delivery_option']").attr("readonly",!1).off("click.mondialrelay.lock")})}});